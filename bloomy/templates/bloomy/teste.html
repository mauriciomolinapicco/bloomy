{% extends "bloomy/layout.html" %}

{% block body %}
<body class="bg-gray-700">
    <div class="container mx-auto py-8">
        <h2 class="text-2xl text-white mb-4 text-center">Quadro de demandas</h2>
        
        <div id="carousel" class="relative overflow-hidden">
            <button id="prev" class="absolute left-0 top-1/2 transform -translate-y-1/2 bg-gray-800 text-white p-2 rounded-full focus:outline-none z-10">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
                </svg>
            </button>
            <div id="inner-carousel" class="flex transition-transform duration-300" style="width: calc(100% + 16rem);">
                {% for order in orders %}
                <div class="w-1/3 flex items-center justify-center border-2 border-yellow-400 text-white rounded-lg overflow-hidden shadow-lg mx-2 p-6" style="height: 350px;">
                    <div class="text-center">
                        <div class="font-bold text-2xl mb-2">{{ order.name }}</div>
                        <div class="text-l mb-2">Data do pedido: {{ order.date|date:"d/m/Y" }}</div>
                        <br>
                        <p>Status:</p>
                        {% if order.status == 'ENTREGUE' %}
                            <p class="text-yellow-300 text-base font-semibold">{{ order.get_status_display }}</p>
                        {% else %}
                            <p class="text-pink-400 text-base font-semibold">{{ order.get_status_display }}</p>
                        {% endif %}
                        <br>
                        
                        <a href="{% url 'single_order' order.id %}">
                            <button class="bg-pink-600 hover:bg-pink-400 text-white py-2 px-4 rounded mt-2">
                                Ver Pedido
                            </button>
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
            <button id="next" class="absolute right-0 top-1/2 transform -translate-y-1/2 bg-gray-800 text-white p-2 rounded-full focus:outline-none z-10">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                </svg>
            </button>
        </div>
    </div>

    <script>
        const prevButton = document.getElementById('prev');
        const nextButton = document.getElementById('next');
        const innerCarousel = document.getElementById('inner-carousel');

        let translateValue = 0;
        const cardWidth = innerCarousel.firstElementChild.clientWidth + 16; // Ancho de la tarjeta mÃ¡s el margen

        nextButton.addEventListener('click', () => {
            translateValue -= cardWidth;
            innerCarousel.style.transform = `translateX(${translateValue}px)`;
        });

        prevButton.addEventListener('click', () => {
            translateValue += cardWidth;
            innerCarousel.style.transform = `translateX(${translateValue}px)`;
        });
    </script>
</body>

{% endblock %}
